# 이중 모드

### 한 컴퓨터를 여러명이 또는 한 사람이 여러가지 프로그램을 사용하는 환경을 생각해보자.

예를 들면, 수강신청을 하려고 대기타는데 재학생 중 누군가가 서버 컴퓨터를 꺼버리는 명령을 입력했다.

이 무슨 혼돈의 상황인가?

사용자의 고의/실수가 프로그램 전체에 영향이 미치지 않도록 하기 위해 **이중 모드**가 존재한다.

보안 문제 때문에 필요하다.

<br>

### 사용자 모드 vs 관리자 모드

사용자 모드는 심각한 문제를 유발할 수 있는 명령(특권 명령)을 내릴 수 없음.

관리자 모드는 특권 명령을 내릴 수 있음.

- 특권 명령 : STOP, HALT, RESET, SET_INPUT...
- 관리자 모드 = 모니터 모드 = 시스템 모드
- 모니터 비트로 상태를 표시. (1: 관리자 모드, 0: 사용자 모드)
- 운영체제 서비스 실행 시 : 관리자 모드
- 사용자 프로그램 실행 시 : 사용자 모드
- 하드웨어/소프트웨어 인터럽트 발생 : 관리자 모드
- 운영체제 서비스가 끝나면 : 사용자 모드


### 일반적 프로그램의 실행

- OS가 프로그램 적재 (on memory)
- 사용자 모드 -> 키보드, 마우스 입력 -> 관리자 모드 -> 사용자 모드 -> 모니터, 디스크, 프린터 -> 관리자 모드 -> 사용자 모드

사용자 모드, 관리자 모드 왔다 갔다 한다.

<br>

#### ex) 게임 프로그램이 하드디스크에 게임 기록을 저장하고 싶다
- 직접 저장할 수 있다는 것은 게임 프로그램이 하드디스크에 직접 접근할 수 있다는 것.
- 다른 사람이 내 파일에 접근하는 것은 좋지 않다. 보안 문제가 생길 수 있다.
<br>
-> 그래서 OS한테 부탁한다. 하드디스크 같은 자원을 사용하고 싶어.
<br>
<br>
<br>
**부탁 = 소프트웨어 인터럽트**


- 인터럽트가 걸리면 CPU는 하던 일을 중지하고 인터럽트 서비스 루틴이 실행된다. 그리고 모니터 비트는 1이 된다. 
- 관리자 모드 이므로 아무 명령을 내릴 수 있다. 즉, 하드디스크 저장이 가능하다.
- 하드디스크에 기록을 저장하고 다시 모니터 비트는 0이 되고, 사용자 모드로 전환된다.
